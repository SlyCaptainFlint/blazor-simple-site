<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <title>Olga Zinoveva</title>
    <base href="/" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Raleway|Abel|Advent+Pro|Cairo|Economica|Josefin+Slab|Overpass|Poiret+One|Quicksand|Rajdhani&display=swap" rel="stylesheet"> 
    <link href="css/site.css" rel="stylesheet" />
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
</head>

<body>
    <link rel="preload" as="video" href="intro.mp4">
    <link rel="preload" as="video" href="loop.mp4">

    <app>
        <div id="fallbackBackground">
            <div class="ui-loader"></div>
        </div>        
    </app>

    <div id="blazor-error-ui"class="notification is-warning">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
    </div>
    
    <script src="_framework/blazor.webassembly.js"></script>
    <script type="text/javascript">
        window.getMainContainerDimensions = function() {
            let element = document.getElementById("MainBodyContainer");
            console.log(element);
            return {
                    width: element.clientWidth,
                    height: element.clientHeight
            };
        };

        window.playBackgroundVideos = async function(videoIntroId, videoLoopingId) {
            let videoIntro = document.getElementById(videoIntroId);
            let videoLooping = document.getElementById(videoLoopingId);
            videoIntro.src = 'intro.mp4';
            videoLooping.src = 'loop.mp4'
            videoIntro.muted = 'muted';
            videoLooping.muted = 'muted';

            let loopLoaded = false
            let introComplete = false;

            videoIntro.addEventListener('ended', (event) => {
                videoIntro.classList.add('hidden');
                introComplete = true;

                if(loopLoaded){
                    videoLooping.classList.remove('hidden');
                    videoLooping.play();
                }
            });

            videoIntro.addEventListener('canplaythrough', (event) => {
                videoIntro.play();
            }); 

            videoLooping.addEventListener('canplaythrough', (event) => {
                loopLoaded = true;

                if(introComplete){
                    videoLooping.classList.remove('hidden');
                    videoLooping.play();
                }
            });        
        };

        window.playVideoIfNotStarted = async function(videoId) {
            let video = document.getElementById(videoId);
            video.classList.remove('hidden');
            video.muted = 'muted';
            video.addEventListener('canplaythrough', (event) => {
                video.play();
            });            
        }
    </script>
</body>

</html>
